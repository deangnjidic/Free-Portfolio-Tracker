<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Charts - Free Portfolio Tracker | Visualize Your Investments</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Visualize your investment portfolio with interactive charts. View asset allocation, performance trends, type distribution, and portfolio growth over time.">
    <meta name="keywords" content="portfolio charts, investment visualization, asset allocation, portfolio analytics, investment charts, financial charts">
    <meta name="author" content="Free Portfolio Tracker">
    <meta name="robots" content="noindex, nofollow">
    <link rel="canonical" href="https://freeportfoliotracker.com/charts.html">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://freeportfoliotracker.com/charts.html">
    <meta property="og:title" content="Portfolio Charts - Free Portfolio Tracker">
    <meta property="og:description" content="Visualize your investments with interactive charts and analytics.">
    <meta property="og:image" content="https://freeportfoliotracker.com/icon-192.png">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Portfolio Charts - Free Portfolio Tracker">
    <meta name="twitter:description" content="Visualize your investments with interactive charts and analytics.">
    <meta name="twitter:image" content="https://freeportfoliotracker.com/icon-192.png">
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="cookie-consent.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    
    <!-- Google Consent Mode v2 + GTM (Loads immediately with consent denied by default) -->
    <script src="consent-init.js"></script>
    
    <!-- Google Tag Manager -->
    <script async src="https://www.googletagmanager.com/gtm.js?id=GTM-PWHJ9WLH"></script>
    
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-X00WL6B8W3"></script>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PWHJ9WLH"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <!-- Header Section -->
    <header class="header">
        <div class="header-content">
            <h1>Portfolio Charts</h1>
            <div class="header-controls">
                <button onclick="window.location.href='app.html'" class="btn btn-secondary">‚Üê Back to Portfolio</button>
                <button onclick="window.location.href='history.html'" class="btn btn-secondary">üìà History</button>
            </div>
        </div>
    </header>

    <!-- Charts Grid -->
    <section class="charts-container">
        <!-- Asset Allocation Pie Chart -->
        <div class="chart-card">
            <h3>Asset Allocation</h3>
            <canvas id="assetAllocationChart"></canvas>
        </div>

        <!-- Person Comparison Bar Chart -->
        <div class="chart-card">
            <h3 id="personComparisonTitle">John vs Maria by Asset Type</h3>
            <canvas id="personComparisonChart"></canvas>
        </div>

        <!-- Total Value by Asset Type -->
        <div class="chart-card">
            <h3>Portfolio Breakdown</h3>
            <canvas id="breakdownChart"></canvas>
        </div>
    </section>

    <!-- New Charts Row 1: Daily Gain/Loss + Savings vs Invested -->
    <section class="charts-container">
        <div class="chart-card">
            <div class="chart-card-header">
                <h3>üìÖ Daily Gain / Loss</h3>
                <div class="chart-filter-bar">
                    <button class="chart-filter-btn" data-chart="daily" data-filter="7d">7D</button>
                    <button class="chart-filter-btn" data-chart="daily" data-filter="30d">30D</button>
                    <button class="chart-filter-btn" data-chart="daily" data-filter="ytd">YTD</button>
                    <button class="chart-filter-btn active" data-chart="daily" data-filter="all">All</button>
                </div>
            </div>
            <div id="dailyGainLossEmpty" class="chart-empty-state">Save at least 2 snapshots to see daily gain/loss.</div>
            <canvas id="dailyGainLossChart" style="display:none;"></canvas>
        </div>
        <div class="chart-card">
            <h3>üè¶ Savings vs Invested</h3>
            <canvas id="savingsInvestedChart"></canvas>
        </div>
    </section>

    <!-- New Charts Row 2: Stacked Composition + Cumulative Return -->
    <section class="charts-container">
        <div class="chart-card">
            <div class="chart-card-header">
                <h3>üì¶ Portfolio Composition Over Time</h3>
                <div class="chart-filter-bar">
                    <button class="chart-filter-btn" data-chart="composition" data-filter="7d">7D</button>
                    <button class="chart-filter-btn" data-chart="composition" data-filter="30d">30D</button>
                    <button class="chart-filter-btn" data-chart="composition" data-filter="ytd">YTD</button>
                    <button class="chart-filter-btn active" data-chart="composition" data-filter="all">All</button>
                </div>
            </div>
            <div id="compositionEmpty" class="chart-empty-state">Save at least 2 snapshots to see composition over time.</div>
            <canvas id="compositionChart" style="display:none;"></canvas>
        </div>
        <div class="chart-card">
            <div class="chart-card-header">
                <h3>üìà Cumulative Return (%)</h3>
                <div class="chart-filter-bar">
                    <button class="chart-filter-btn" data-chart="cumulative" data-filter="7d">7D</button>
                    <button class="chart-filter-btn" data-chart="cumulative" data-filter="30d">30D</button>
                    <button class="chart-filter-btn" data-chart="cumulative" data-filter="ytd">YTD</button>
                    <button class="chart-filter-btn active" data-chart="cumulative" data-filter="all">All</button>
                </div>
            </div>
            <div id="cumulativeReturnEmpty" class="chart-empty-state">Save at least 2 snapshots to see cumulative return.</div>
            <canvas id="cumulativeReturnChart" style="display:none;"></canvas>
        </div>
    </section>

    <!-- New Charts Row 3: Asset Scatter (full width) -->
    <section class="charts-container">
        <div class="chart-card chart-card-full">
            <h3>üîµ Asset Performance Scatter (Today's % Change vs Value)</h3>
            <div id="scatterEmpty" class="chart-empty-state">Refresh prices on the portfolio page to see the scatter chart.</div>
            <canvas id="scatterChart" style="display:none;"></canvas>
        </div>
    </section>

    <!-- Top/Bottom Performers Section -->
    <section class="performers-section">
        <div class="performers-card">
            <h3>üìà Top 5 Performers</h3>
            <div id="topPerformers" class="performers-list"></div>
        </div>
        <div class="performers-card">
            <h3>üìâ Bottom 5 Performers</h3>
            <div id="bottomPerformers" class="performers-list"></div>
        </div>
    </section>

    <style>
        /* Chart Filter Bar (shared) */
        .chart-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 16px;
        }

        .chart-card-header h3 {
            margin: 0 !important;
        }

        .chart-filter-bar {
            display: flex;
            gap: 5px;
        }

        .chart-filter-btn {
            padding: 4px 10px;
            border-radius: 6px;
            border: 1px solid #30363d;
            background: #0d1117;
            color: #8b949e;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            letter-spacing: 0.3px;
        }

        .chart-filter-btn:hover {
            border-color: #58a6ff;
            color: #58a6ff;
        }

        .chart-filter-btn.active {
            background: #1f6feb;
            border-color: #1f6feb;
            color: #ffffff;
        }

        .chart-empty-state {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 160px;
            color: #8b949e;
            font-size: 14px;
            font-style: italic;
            text-align: center;
            padding: 20px;
        }
        .chart-card-full {
            grid-column: 1 / -1;
        }
    </style>
    <script src="config.example.js"></script>
    <script src="config.js"></script>
    <script src="charts.js"></script>
    
    <!-- Cookie Consent System -->
    <script src="cookie-consent.js"></script>
</body>
</html>
